# C1-G 暗中观察

## 题面 
---
### 题目描述
---
$Zhoues$ 这个同学估计大家都不怎么认识，但是这不重要，重要的是你只需要知道他有一项特殊的能力——**暗中观察**。他经常通过这个能力轻松看透一些事物背后的算法原理。

虽然学校因为疫情封校，但是却校园内却盛行一款游戏：

*   该游戏中有小 A 和小 B 两个角色，初始给定两个正整数 $n$ 和 $k$，小 A 和小 B 轮流对 $n$ 减去 $k$ 的任意非负整数次幂（即 $k$^i^, $i∈N$），但需要保证 $n$ 始终非负，最终在自己回合将 $n$ 变为 0 的一方获胜。
每次游戏开始都是小 A 先手，且小 A 小 B 两个人都会采取最优策略，那么每轮谁会赢呢？

$Zhoues$ 暗中观察了几场这两款游戏的对局，已经看透了背后的算法奥秘，现在你只要告诉他游戏的初始情况，他就可以直接告诉你最后的赢家是谁 !
</br>

### 输入格式
---
第一行一个正整数 $t$（1$\le t \le$50） ，表示数据组数。

对于每组数据，一行两个正整数 $n,k$（1 $\le n,k \le$10^3^），含义同题目描述。
</br>

### 输出格式
---
对于每组数据，输出一行：

*   若小 A 获胜，输出 `~A~`。
*   若小 B 获胜，输出 `~B~`。
</br>

### 输入样例
---
```
2
3 2
3 4
```
</br>

### 输出样例
```
~B~
~A~
```

## 题解思路
---
&emsp;&emsp;第一眼看到这个题，我想起了之前做过的另一道博弈论的题目（**accoding id:257**）。下面简单地说一下那一道题的题，对解决这一道题是有帮助的（当然，这一部分可以跳过）。
</br>

</br>
&emsp;&emsp;简而言之，那道题是该题的简化版本，有$n$个面包，小明和小红每次都只能拿 $2$ 的整数次幂(如 $1,2,4$ 等)个面包，拿走最后一个面包的获胜，小明先手，让你推测谁会获胜。（相当于该题的输入$k=2$）

&emsp;&emsp;我们先讨论几种简单的情况，看看能不能发现规律：
*   当 $n=1$ 时，小明直接取走一个面包，先手胜利
*   当 $n=2$ 时，小明直接取走两个面包，先手胜利
*   当 $n=3$ 时，如果小明取走一个面包，小红取走两个；如果小明取走两个面包，小红取走一个
*   当 $n=4$ 时，小明取走一个面包，转化为 $n=3$ 的情况，此时小明作为 $n=3$ 的后手必胜，故先手胜利
*   当 $n=5$ 时，小明取走两个面包，同样转化为 $n=3$ 的情况，小明胜利
*   当 $n=6$ 时，如果小明取走四个或两个面包，小红显然胜利；如果小明取走两个面包，小红取走一个面包，又转化为 $n=3$ 的情况，小红作为此时的后手，显然胜利
 
&emsp;&emsp;我们不难根据上面的讨论得出一些猜想，**当且仅当 $n$ 能被 3 整除时，后手胜利，否则先手胜利**，下面，我们尝试证明这个猜想的正确性，我们将尝试用简单的语言来进行解释，而避免使用看着较难理解的语言，并且我们会解释的尽可能详细。事先说明，**我们使用 $P$ 来表示先手胜利的状态， $N$ 来表示后手必胜状态（即先手必败）**。

&emsp;&emsp;&emsp;**1**.**当 $n$ 能被 $3$ 整除时**，我们先给出一种基本情况，即 $0$ 能被 $3$ 整除，此时相当于后手获胜（因为轮到先手的时候先手没有能取的了，所以先手输了），即 $N$ 情况。我们假设，先手取走了 $2$^m^ 个面包，那么，我们一定可以保证在后手取完后 $n$ 还可以被 $3$ 被整除，这样的数学依据是无比显然的：$2$ 的所有奇数次幂除以 $3$ 余 $2$ , $2$ 的所有偶数次幂除以 $3$ 余 $1$ （易证）。而当后手取的时候，只要面包数还大于三，就一定可以取一个 $2$ 的奇数次幂或偶数次幂，保证与先手取的面包数之和能被 $3$ 整除；如果面包数小于 $3$ ，后手显然获胜。而由于面包数不断减小，而最小的合法值为 $0$。正如我们开始所讨论的，此时算先手失败。所以，在这种取法下，先手必败，后手必胜。所以，**我们说 $n$ 能被 $3$ 整除是一个 $N$**。
&emsp;&emsp;&emsp;**2**.**当 $n$ 不能被 $3$ 整除时**，这时先手的机会就来了，这时因为 $n$ 一定与 $1$ 或者 $2$ 同余，只要先手取走相应的余数，那么此时面包数能被 $3$ 整除，而且是后手首先进行这种情况下的选取，即后手变成了情况 $1$ 中的先手。所以后手必败，**我们说这种情况是一个 $P$** 。

&emsp;&emsp;我们的猜想得到了完美的证明，即 **$n$ 能被 $3$ 整除时，后手必胜，否则先手必胜**。

&emsp;&emsp;这个问题总能让我们联想到我们以前都听过的另一个问题，一朵花有 $12$ 个花瓣，两个人轮流摘花瓣，每次只能摘 $1$ 个或者 $2$ 个，那么后手必胜。实际上，这就是巴什博弈（从助教那里知道的，赞美助教）的一个典型例子，这道题可以说是有异曲同工之妙。
</br>
</br>

&emsp;&emsp;让我们来回归正题，我们在上面的简单问题中抓住了一个关键数字: $3$ 。为什么是 $3$ 呢，在我们给出的数学解释中，不难发现 $3$ 是怎么出现的，简单地说，当我们选定 $k$ 后，它对于一个比它大的数与 $k$ 同余，我们若想让奇偶互补，显然$k$^2^就要与 $-k$ 同余，故 $k$ 与 $-1$ 同余，且 $k$ 与 $k$ 同余，故从同余系的角度看，$-1$ 和 $k$ 是等价的，所以这个数就是 $k+1$。所以，我们大胆地做出猜测，**对于一组输入 $n,k$ ，情况是 $N$ 还是 $P$ 只与 $n$ 除以 $k+1$ 的余数有关** !下面，我们将给出严谨的讨论与证明：

&emsp;&emsp;&emsp;**1.如果 $n$ 能被 $k+1$ 整除，则此时是情况 $N$** 。给出 $N$ 的一种最基本（最小）的情况，当 $n=0$ 时，显然先手没法再取，所以是情况 $N$ 。如果 $n$ 不是0，则不论对先手的何种取法，后手都有对应的合法取法，让 $n$ 能被 $k+1$ 整除（因为 $k 与 k$ 同余；$k$^2^ 与 $k*（k+1）- k$，即 $-k$ ，即 $1$ 同余，由此陷入了一个奇数和偶数的循环）。故先手取奇数次幂，后手就取偶数次幂；先手取偶数次幂，后手就取奇数次幂。且面包数一直在减小，所以最后一定会到 $N$ 的基本情况，故 $n$ 能被 $k+1$ 整除的情况都是情况 $N$。
&emsp;&emsp;&emsp;**2.如果 $n$ 除以 $k+1$ 的余数是 $k$ ，那么为情况 $P$** 。这是因为只要先手取走 $k$ （即 $k$ 的一次幂），那么就转化成为情况一，且此时后手为情况一的先手，故后手必败，即为情况 $P$。
&emsp;&emsp;&emsp;**3.如果 $n$ 除以 $k+1$ 的余数是小于 $k$ 的偶数，则此时是情况 $N$**。我们事先说明，我们并没有像上面那道简单情况一样，将所有 $n$ 不能被 $k+1$ 整除的情况放在一起讨论，是因为我们很显然可以发现，如果 $n$ 小于 $k$ 时，每个人每次都只能取一个，则偶数先手剩，奇数后手剩，并不能一概而论。我们将 $n$ 小于 $k$ ，并且 $n$ 是偶数作为 $N$ 的一个基本情况，则很显然，无论先手如何取，只要后手保证剩下的面包数目除以 $k+1$ 的余数不变（和之前几种情况中的操作完全一样，取奇偶性相反的幂），则最后一定会归纳到我们提到的那个基本情况。所以此时为情况 $N$。
&emsp;&emsp;&emsp;**4.如果 $n$ 除以 $k+1$ 的余数是小于 $k$ 的奇数，则此时是情况 $P$** 。因为只要先手取走一个，余数就变为小于 $k$ 的偶数，变为情况三，且此时后手先取，且此时后手作为情况三的先手，后手必败，故此时为情况 $P$。

&emsp;&emsp;综上所述，我们已经合理地讨论了每一种情况，解决了这个问题。

</br>
# 代码
```


//主代码只有十行左右，真的有贴代码的必要吗QAQ
#include <stdio.h>
int main()
{
	int t;
	scanf("%d",&t);
	int n,k;
	for(int i=1;i<=t;i++ )
	{
		scanf("%d%d",&n,&k);
		int s=n%(k+1);
		if(s==0) printf("~B~\n");
		else if(s==k) printf("~A~\n");
		else if(s%2==1) printf("~A~\n");
		else printf("~B~\n");
	}
}

```