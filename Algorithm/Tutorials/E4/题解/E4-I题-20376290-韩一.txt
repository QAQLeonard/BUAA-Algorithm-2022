E4-I XIAO7不想努力了

HY

Description
给定一个 n 个点 m 条边的有向图，请你给所有边分组，使得每一组内边的编号是连续的，并且不存在一条从点 1 到点 n 的路径满足路径上所有边属于同一组。你需要求解最少需要分多少组。
n <= 10^5, m <= 10^6

Solution
将边依次加入，若插入当前边后满足1到n连通，则将当前边划入下一组。
对于当前已经加入的边，我们对每个点u记一个flag_u表示是否可以由1到达u；
每当加入新边(u,v)时，如果flag_u=true，那么从v开始DFS，修改所有未标记的点的flag，注意DFS到已经标记过的点时需要停止继续往下DFS。
这样每条边只会经过一次，而进行新的组别划分时的清零操作也可以做到复杂度只和边的数量相关，故时间复杂度O(m)。